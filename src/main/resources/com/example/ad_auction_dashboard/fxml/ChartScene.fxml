<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane style="-fx-background-color: #2d2d3b;" styleClass="chart-scene" stylesheets="@../../../../styles/style.css" xmlns="http://javafx.com/javafx/17.0.6" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.ad_auction_dashboard.controller.ChartSceneController">
    <top>
        <VBox spacing="5.0" BorderPane.alignment="CENTER">
            <padding>
                <Insets bottom="5.0" left="10.0" right="10.0" top="10.0" />
            </padding>

            <!-- Navigation bar with back, export/print, and logout buttons -->
            <HBox alignment="CENTER_LEFT" spacing="10.0">
                <Button onAction="#handleBackToMetrics" styleClass="transparent-button">
                    <graphic>
                        <ImageView fitHeight="36.0" fitWidth="38.0" pickOnBounds="true" preserveRatio="true">
                            <image>
                                <Image url="@../../../../images/back button.png" />
                            </image>
                        </ImageView>
                    </graphic>
                </Button>

                <Region HBox.hgrow="ALWAYS" />

                <ComboBox fx:id="exportComboBox" prefWidth="150.0" promptText="Export Format" />
                <Button onAction="#exportData" styleClass="nav-button" text="Export" />
                <Button onAction="#printData" styleClass="nav-button" text="Print" />

                <Region minWidth="20.0" />


            </HBox>

            <!-- Filter controls in a clean HBox layout -->
            <HBox alignment="CENTER_LEFT" spacing="10.0" style="-fx-background-color: #363642; -fx-background-radius: 5;">
                <padding>
                    <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                </padding>

                <!-- Date range -->
                <Label text="Date Range:" textFill="WHITE" />
                <DatePicker fx:id="startDatePicker" prefWidth="150.0" promptText="Start Date" />
                <Label text="to" textFill="WHITE" />
                <DatePicker fx:id="endDatePicker" prefWidth="150.0" promptText="End Date" />

                <Region minWidth="20.0" HBox.hgrow="ALWAYS" />

                <!-- Granularity dropdown -->
                <Label text="Granularity:" textFill="WHITE" />
                <ComboBox fx:id="timeGranularityComboBox" prefWidth="120.0" />
            </HBox>

            <!-- Second row of filters -->
            <HBox alignment="CENTER_LEFT" spacing="10.0" style="-fx-background-color: #363642; -fx-background-radius: 5;">
                <padding>
                    <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                </padding>

                <Label text="Gender:" textFill="WHITE" />
                <ComboBox fx:id="genderFilterComboBox" prefWidth="100.0" />

                <Label text="Age:" textFill="WHITE" />
                <ComboBox fx:id="ageFilterComboBox" prefWidth="100.0" />

                <Label text="Income:" textFill="WHITE" />
                <ComboBox fx:id="incomeFilterComboBox" prefWidth="100.0" />

                <Label text="Context:" textFill="WHITE" />
                <ComboBox fx:id="contextFilterComboBox" prefWidth="130.0" />

                <Region minWidth="20.0" HBox.hgrow="ALWAYS" />

                <Button fx:id="resetFiltersButton" onAction="#resetFilters" styleClass="nav-button" text="Reset Filters" />
            </HBox>

            <!-- Status label for feedback -->
            <Label fx:id="statusLabel" style="-fx-text-fill: #ffcc66; -fx-font-style: italic;" />
        </VBox>
    </top>

    <center>
        <VBox alignment="CENTER" prefHeight="665.0" prefWidth="937.0" spacing="15.0">
            <padding>
                <Insets bottom="20.0" left="20.0" right="20.0" top="10.0" />
            </padding>

            <!-- Chart title -->
            <Label alignment="CENTER" contentDisplay="CENTER" text="DATA VISUALIZATION" textAlignment="CENTER" textFill="WHITE">
                <font>
                    <Font name="System Bold" size="22.0" />
                </font>
            </Label>

            <!-- Chart selection controls - Removed margins to make it visible -->
            <HBox alignment="CENTER" spacing="30.0">
                <VBox alignment="CENTER" spacing="5.0">
                    <Label text="Primary Chart" textFill="WHITE">
                        <font>
                            <Font size="14.0" />
                        </font>
                    </Label>
                    <ComboBox fx:id="primaryChartTypeComboBox" prefWidth="200.0" />
                </VBox>

                <VBox alignment="CENTER" spacing="5.0">
                    <Label text="Comparison Chart" textFill="WHITE">
                        <font>
                            <Font size="14.0" />
                        </font>
                    </Label>
                    <HBox alignment="CENTER" spacing="10.0">
                        <ComboBox fx:id="secondaryChartTypeComboBox" prefWidth="200.0" />
                        <ToggleButton fx:id="compareToggleButton" style="-fx-background-color: #363642; -fx-text-fill: white; -fx-border-color: #a365f5; -fx-border-radius: 4;" text="Show Comparison" />
                    </HBox>
                </VBox>
            </HBox>

            <!-- Charts container -->
            <HBox fx:id="chartsContainer" alignment="CENTER" spacing="10.0" VBox.vgrow="ALWAYS">
                <!-- Primary chart container -->
                <VBox fx:id="primaryChartContainer" minHeight="450.0" minWidth="400.0" style="-fx-background-color: #363642; -fx-border-color: #a365f5; -fx-border-width: 2; -fx-background-radius: 15; -fx-border-radius: 15;" HBox.hgrow="ALWAYS">
                    <padding>
                        <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                    </padding>
                </VBox>

                <!-- Secondary chart container (initially hidden) -->
                <VBox fx:id="secondaryChartContainer" managed="false" minHeight="450.0" minWidth="400.0" style="-fx-background-color: #363642; -fx-border-color: #a365f5; -fx-border-width: 2; -fx-background-radius: 15; -fx-border-radius: 15;" visible="false" HBox.hgrow="ALWAYS">
                    <padding>
                        <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                    </padding>
                </VBox>
            </HBox>
        </VBox>
    </center>
</BorderPane>