<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.String?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane styleClass="chart-scene" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.ad_auction_dashboard.controller.ChartSceneController">
    <top>
        <VBox spacing="5.0" BorderPane.alignment="CENTER">
            <padding>
                <Insets bottom="5.0" left="10.0" right="10.0" top="10.0" />
            </padding>

            <!-- Navigation bar with back, export/print, and logout buttons -->
            <HBox alignment="CENTER_LEFT" spacing="10.0">
                <Button fx:id="backButton" onAction="#handleBackToMetrics">
                    <graphic>
                        <ImageView fitHeight="36.0" fitWidth="38.0" pickOnBounds="true" preserveRatio="true" styleClass="back">
                            <image>
                                <Image url="@../../../../images/back button.png" />
                            </image>
                        </ImageView>
                    </graphic>
               <styleClass>
                  <String fx:value="transparent-button" />
                  <String fx:value="icon-container" />
               </styleClass>
                </Button>

                <Region HBox.hgrow="ALWAYS" />
            <ToggleButton fx:id="colourSwitch" alignment="CENTER_LEFT" minWidth="60.0" mnemonicParsing="false" onAction="#toggleColour" prefHeight="30.0" prefWidth="65.0" styleClass="colour-switch" stylesheets="@../../../../styles/style.css" />

                <ComboBox fx:id="exportComboBox" prefWidth="150.0" promptText="Export Format" />
                <Button fx:id="exportButton" onAction="#exportData" styleClass="nav-button" text="Export" />
                <Button fx:id="printButton" onAction="#printData" styleClass="nav-button" text="Print" />

                <Region minWidth="20.0" />
            <Button fx:id="logoutBtn" onAction="#handleLogout">
               <graphic>
                  <ImageView fitHeight="36.0" fitWidth="38.0" pickOnBounds="true" preserveRatio="true" styleClass="logoff">
                     <image>
                        <Image url="@../../../../images/back button.png" />
                     </image>
                  </ImageView>
               </graphic>
               <styleClass>
                  <String fx:value="transparent-button" />
                  <String fx:value="icon-container" />
               </styleClass>
            </Button>


            </HBox>

            <!-- Filter controls in a clean HBox layout -->
            <HBox alignment="CENTER_LEFT" spacing="10.0" styleClass="chart-setting-container">
                <padding>
                    <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                </padding>

                <!-- Date range -->
                <Label styleClass="filter-label" text="Date Range:" textFill="WHITE" />
                <DatePicker fx:id="startDatePicker" prefWidth="150.0" promptText="Start Date" />
                <Label styleClass="filter-label" text="to" textFill="WHITE" />
                <DatePicker fx:id="endDatePicker" prefWidth="150.0" promptText="End Date" />

                <Region minWidth="20.0" HBox.hgrow="ALWAYS" />

                <!-- Granularity dropdown -->
                <Label styleClass="filter-label" text="Granularity:" textFill="WHITE" />
                <ComboBox fx:id="timeGranularityComboBox" prefWidth="120.0" />
            </HBox>

            <!-- Second row of filters -->
            <HBox alignment="CENTER_LEFT" spacing="10.0" styleClass="chart-setting-container">
                <padding>
                    <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                </padding>

                <Label styleClass="filter-label" text="Gender:" textFill="WHITE" />
                <ComboBox fx:id="genderFilterComboBox" prefWidth="100.0" />

                <Label styleClass="filter-label" text="Age:" textFill="WHITE" />
                <ComboBox fx:id="ageFilterComboBox" prefWidth="100.0" />

                <Label styleClass="filter-label" text="Income:" textFill="WHITE" />
                <ComboBox fx:id="incomeFilterComboBox" prefWidth="100.0" />

                <Label styleClass="filter-label" text="Context:" textFill="WHITE" />
                <ComboBox fx:id="contextFilterComboBox" prefWidth="130.0" />

                <Region minWidth="20.0" HBox.hgrow="ALWAYS" />

                <Button fx:id="resetFiltersButton" onAction="#resetFilters" styleClass="nav-button" text="Reset Filters" />
            </HBox>

            <!-- Status label for feedback -->
            <Label fx:id="statusLabel" style="-fx-text-fill: #ffcc66; -fx-font-style: italic;" />
         <Label fx:id="printLabel" style="-fx-text-fill: #ffcc66; -fx-font-style: italic;" />
        </VBox>
    </top>

    <center>
        <VBox alignment="CENTER" prefHeight="665.0" prefWidth="937.0" spacing="15.0">
            <padding>
                <Insets bottom="20.0" left="20.0" right="20.0" top="10.0" />
            </padding>

            <!-- Chart title -->
            <Label alignment="CENTER" contentDisplay="CENTER" styleClass="chart-title" text="DATA VISUALIZATION" textAlignment="CENTER" textFill="WHITE">
                <font>
                    <Font name="System Bold" size="22.0" />
                </font>
            </Label>

            <!-- Chart selection controls - Removed margins to make it visible -->
            <HBox alignment="CENTER" spacing="30.0">
                <VBox alignment="CENTER" spacing="5.0">
                    <Label styleClass="filter-label" text="Primary Chart" textFill="WHITE">
                        <font>
                            <Font size="14.0" />
                        </font>
                    </Label>
                    <ComboBox fx:id="primaryChartTypeComboBox" prefWidth="200.0" />
                </VBox>

                <VBox alignment="CENTER" spacing="5.0">
                    <Label styleClass="filter-label" text="Comparison Chart" textFill="WHITE">
                        <font>
                            <Font size="14.0" />
                        </font>
                    </Label>
                    <HBox alignment="CENTER" spacing="10.0">
                        <ComboBox fx:id="secondaryChartTypeComboBox" prefWidth="200.0" />
                        <ToggleButton fx:id="compareToggleButton" styleClass="nav-button" text="Show Comparison" />
                    </HBox>
                </VBox>
            </HBox>

            <!-- Charts container -->
            <HBox fx:id="chartsContainer" alignment="CENTER" spacing="10.0" VBox.vgrow="ALWAYS">
                <!-- Primary chart container -->
                <VBox fx:id="primaryChartContainer" minHeight="450.0" minWidth="400.0" styleClass="chart-container" HBox.hgrow="ALWAYS">
                    <padding>
                        <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                    </padding>
                </VBox>

                <!-- Secondary chart container (initially hidden) -->
                <VBox fx:id="secondaryChartContainer" managed="false" minHeight="450.0" minWidth="400.0" styleClass="chart-container" visible="false" HBox.hgrow="ALWAYS">
                    <padding>
                        <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                    </padding>
                </VBox>
            </HBox>
        </VBox>
    </center>
</BorderPane>
